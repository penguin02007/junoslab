---
provider: clab
defaults.device: vmx
module: [ vlan ]
netlab_license_file: ~/netlab/vmx_license.txt
nodes:
  r1:
    id: 1
    mgmt.ipv4: 10.10.1.101
    mgmt.ifname: fxp0
  r2:
    id: 2
    mgmt.ipv4: 10.10.1.102
    mgmt.ifname: fxp0
  r3:
    id: 3
    mgmt.ipv4: 10.10.1.103
    mgmt.ifname: fxp0
  r4:
    id: 4
    mgmt.ipv4: 10.10.1.104
    mgmt.ifname: fxp0
  r5:
    id: 5
    mgmt.ipv4: 10.10.1.105
    mgmt.ifname: fxp0
  r6:
    id: 6
    mgmt.ipv4: 10.10.1.106
    mgmt.ifname: fxp0
  r7:
    id: 7
    mgmt.ipv4: 10.10.1.107
    mgmt.ifname: fxp0
  r8:
    id: 8
    mgmt.ipv4: 10.10.1.108
    mgmt.ifname: fxp0
  sw1:
    id: 30
    mgmt.ipv4: 10.10.1.130
    mgmt.ifname: fxp0

vlans:
  r2vlan123:
    id: 123
    mode: irb
  r3vlan123:
    id: 123
    mode: irb

links:
  - r1:
      ifindex: 1
    r2:
      ifindex: 1
  - r1:
      ifindex: 2
    r2:
      ifindex: 2
  - r1:
      ifindex: 4
      name: r1->sw1
    sw1:
      ifindex: 1
      name: sw1->r1
  - r2:
      ifindex: 4
      name: r2->sw1
      vlan.trunk: [ r2vlan123 ]
    sw1:
      ifindex: 2
      name: sw1->r2
  - r3:
      ifindex: 4
      name: r3->sw1
      vlan.trunk: [ r3vlan123 ]
    sw1:
      ifindex: 5
      name: sw1->r4
  - r4:
      ifindex: 4
      name: r4->sw1
    sw1:
      ifindex: 6
      name: sw1->r4
  - r5:
      ifindex: 4
      name: r5->sw1
    sw1:
      ifindex: 7
      name: sw1->r5
  - r5:
      ifindex: 1
      name: r5->r6
    r6:
      ifindex: 1
      name: r6->r5
  - r5:
      ifindex: 2
      name: r5->r6
    r6:
      ifindex: 2
      name: r6->r5
  - r6:
      ifindex: 4
      name: r6->sw1
    sw1:
      ifindex: 8
      name: sw1->r6
  - r7:
      ifindex: 4
      name: r7->sw1
    sw1:
      ifindex: 9
      name: sw1->r7
  - r8:
      ifindex: 4
      name: r8->sw1
    sw1:
      ifindex: 10
      name: sw1->r8
addressing:
  mgmt:
    ipv4: 10.10.1.0/24
    prefix: 24
    start: 100
